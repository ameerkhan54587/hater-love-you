<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="https://res.cloudinary.com/dc1q32wzt/image/upload/v1685918602/icon_ameer_w_adrrbk.ico">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>


    <link rel="stylesheet" href="css/admin.css">

 

</head>
<body>
    <h1>Admin Panel</h1>
    
    <div style="display: flex;">
        <!-- Set Cancellations -->
        <div style="flex: 1;" id="cancellationContainer">
            <h2>Set Cancellations</h2>
            <div id="cancellationListBoxes">
                <!-- Cancellation input boxes for each day will be displayed here -->
            </div>
        </div>
        
        <!-- Going List -->
        <div style="flex: 1;" id="goingListContainer">
            <h2>Going List</h2>
            <div id="goingListBoxes">
                <div id="selectedGoingDayLabel"></div>
                <!-- Going list input boxes for each day will be displayed here -->
            </div>
        </div>
    </div>
    
    <!-- Day Selector Buttons -->
    <div class="day-buttons">
        <button onclick="showDay('monday')">Monday</button>
        <button onclick="showDay('tuesday')">Tuesday</button>
        <button onclick="showDay('wednesday')">Wednesday</button>
        <button onclick="showDay('thursday')">Thursday</button>
        <button onclick="showDay('friday')">Friday</button>
        <button onclick="showDay('saturday')">Saturday</button>
        <button onclick="showDay('sunday')">Sunday</button>
    </div>
    
    <!-- Save Button -->
    <div class="save-button">
        <button onclick="saveData()">Save</button>
    </div>
    
    <script>
        const goingListBoxes = document.getElementById("goingListBoxes");
        const selectedGoingDayLabel = document.getElementById("selectedGoingDayLabel");
        const goingListInputs = {};
        
        const cancellationContainer = document.getElementById("cancellationContainer");
        const cancellationListBoxes = document.getElementById("cancellationListBoxes");
        const selectedCancellationDayLabel = document.createElement("div");
        selectedCancellationDayLabel.id = "selectedCancellationDayLabel";
        cancellationContainer.insertBefore(selectedCancellationDayLabel, cancellationContainer.firstChild);
        
        const cancellationTables = document.querySelectorAll("#cancellationContainer table");
        cancellationTables.forEach(table => {
            table.style.display = "none";
        });
        
        const cancellationInputs = {};
        
        function hideAllGoingListInputs() {
            Object.values(goingListInputs).forEach(input => {
                input.style.display = "none";
            });
        }
        
        function hideAllCancellationInputs() {
            Object.values(cancellationInputs).forEach(input => {
                input.style.display = "none";
            });
        }
        
        function showDay(day) {
            hideAllGoingListInputs();
            hideAllCancellationInputs();
            
            if (!goingListInputs[day]) {
                const input = document.createElement("textarea");
                input.id = `going${day}`;
                input.rows = "7"; // Set to 7 rows for multiple lines
                input.cols = "30"; // Adjust cols for the desired width
                input.placeholder = `Enter ${day} going list`;
                input.value = localStorage.getItem(`going${day}`) || '';
                
                goingListInputs[day] = input;
                goingListBoxes.appendChild(input);
            }
            
            goingListInputs[day].style.display = "block";
            selectedGoingDayLabel.textContent = day.charAt(0).toUpperCase() + day.slice(1);
            
            if (!cancellationInputs[day]) {
                const input = document.createElement("textarea");
                input.id = `cancellation${day}`;
                input.rows = "7"; // Set to 7 rows for multiple lines
                input.cols = "30"; // Adjust cols for the desired width
                input.placeholder = `Enter ${day} cancellation`;
                input.value = localStorage.getItem(`cancellation${day}`) || '';
                
                cancellationInputs[day] = input;
                cancellationListBoxes.appendChild(input);
            }
            
            cancellationInputs[day].style.display = "block";
            selectedCancellationDayLabel.textContent = day.charAt(0).toUpperCase() + day.slice(1);
            
            cancellationTables.forEach(table => {
                if (table.querySelector(`#${day}`)) {
                    table.style.display = "block";
                } else {
                    table.style.display = "none";
                }
            });
        }
        
        // Save data logic
        function saveData() {
        Object.keys(goingListInputs).forEach(day => {
            const goingInput = goingListInputs[day];

            // Update data in Firebase
            database.ref(`going/${day}`).set(goingInput.value);

            console.log(`Saved Going List for ${day}: ${goingInput.value}`);
        });

        Object.keys(cancellationInputs).forEach(day => {
            const cancellationInput = cancellationInputs[day];

            // Update data in Firebase
            database.ref(`cancellation/${day}`).set(cancellationInput.value);

            console.log(`Saved Cancellation List for ${day}: ${cancellationInput.value}`);
        });

        alert("Data saved!");
    }

    // Show only Monday input boxes on page load
    window.onload = function() {
            loadAndPopulateData();
            showDay('monday'); // Show input fields for Monday by default
        };

        function loadAndPopulateData() {
            const days = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"];

            days.forEach(day => {
                database.ref(`going/${day}`).once("value").then(snapshot => {
                    const goingInput = document.getElementById(`going${day}`);
                    const goingValue = snapshot.val();
                    goingInput.value = goingValue || "";
                }).catch(error => {
                    console.error("Error fetching going data:", error);
                });

                database.ref(`cancellation/${day}`).once("value").then(snapshot => {
                    const cancellationInput = document.getElementById(`cancellation${day}`);
                    const cancellationValue = snapshot.val();
                    cancellationInput.value = cancellationValue || "";
                }).catch(error => {
                    console.error("Error fetching cancellation data:", error);
                });
            });
        }

</script>


<script>
    // Password for admin access
    const adminPassword = "apple"; 

    function askPassword() {
        // Prompt the user for the password
        const enteredPassword = prompt("Please enter the admin password:");

        if (enteredPassword === adminPassword) {
            // Correct password, show admin panel
            loadAndPopulateData();
            showAdminPanel();
        } else {
            alert("Incorrect password. Access denied.");
            askPassword(); // Ask for password again
        }
    }

    askPassword();

    function showAdminPanel() {
        // Your admin panel content here
        document.body.innerHTML = `
            <h1>Admin Panel</h1>
            <!-- Rest of your admin panel content -->
        `;
    }

    // Rest of your script
</script>



<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Replace with your Firebase configuration
  const firebaseConfig = {
  apiKey: "AIzaSyBX6ozbZ4N3lIS2116W-M-gtwJCh-5-aA0",
  authDomain: "van-finder-d87f0.firebaseapp.com",
  projectId: "van-finder-d87f0",
  storageBucket: "van-finder-d87f0.appspot.com",
  messagingSenderId: "1025653106851",
  appId: "1:1025653106851:web:1c7452232933825e94b716"
};

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();
</script>

</body>
</html>
